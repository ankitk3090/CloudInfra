version: "3.9"
services:
  db:
    image: infracloudio/csvserver:latest
    restart: always
    volumes:
      - /home/ec2-user/gencsv.sh:/csvserver/gencsv.sh
    command: bash -c "./gencsv.sh && ./csvserver"
    environment:
      - CSVSERVER_BORDER=Orange
    ports:
      - "8090:9300"
  prometheus:
    image: prom/prometheus:v2.21.0
    ports:
      - 9090:9090
    volumes:
      - ./prometheus:/etc/prometheus
      - prometheus-data:/prometheus
    command: --web.enable-lifecycle  --config.file=/etc/prometheus/prometheus.yml
volumes:
  inputdata: {}
  prometheus-data: {}
